<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>èº«ä»½è¯æ™ºèƒ½æ‰«æç»ˆç«¯</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <style>
        /* --- CSS Reset & åŸºç¡€æ ·å¼ --- */
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; }
        body {
            margin: 0; padding: 20px 15px;
            background-color: #121212; /* æ·±ç©ºç°èƒŒæ™¯ï¼Œä¸“ä¸šæ„Ÿ */
            color: #eee;
            font-family: -apple-system, BlinkMacSystemFont, Roboto, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        h2 { margin-bottom: 25px; font-weight: 500; letter-spacing: 1px; text-align: center; }

        /* ä¸»å®¹å™¨ */
        .main-container { width: 100%; max-width: 400px; }

        /* --- ç»“æœå±•ç¤ºå¡ç‰‡ --- */
        .scan-card {
            background: #1e1e1e;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            margin-bottom: 25px;
            border: 1px solid #333;
        }

        .card-header {
            padding: 12px 15px;
            background: #2a2a2a;
            font-size: 14px;
            color: #ccc;
            display: flex; justify-content: space-between;
        }

        /* å›¾ç‰‡æ˜¾ç¤ºåŒºåŸŸï¼šæ¨¡æ‹Ÿæ‰«æä»¶æ•ˆæœ */
        .img-display-area {
            position: relative;
            width: 100%;
            height: 0;
            /* å…³é”®ï¼šè®¾ç½®å®¹å™¨æ¯”ä¾‹ä¸ºèº«ä»½è¯æ¯”ä¾‹ (1/1.58 â‰ˆ 63.3%) */
            padding-bottom: 63.3%; 
            background: #000;
        }

        /* å ä½æç¤º */
        .placeholder {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            color: #555;
        }
        .placeholder span { font-size: 32px; margin-bottom: 10px; }

        /* æ‰«æåçš„å›¾ç‰‡ */
        .scanned-result {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            object-fit: contain; /* ä¿è¯å®Œæ•´æ˜¾ç¤ºï¼Œä¸è£å‰ªï¼Œè¾¹ç¼˜ç•™é»‘ */
            display: none; /* é»˜è®¤éšè— */
            background-color: #000;
        }

        /* å¯åŠ¨æŒ‰é’® */
        .start-btn {
            width: 100%; padding: 15px;
            background: linear-gradient(135deg, #4a90e2, #357abd);
            color: white; border: none; font-size: 16px; font-weight: 500;
            cursor: pointer;
        }
        .start-btn:active { opacity: 0.9; }

        /* --- PDF ä¸‹è½½åŒºåŸŸ --- */
        .pdf-section {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #333;
            text-align: center;
            display: none; /* é»˜è®¤éšè—ï¼Œæ‹å®Œæ‰æ˜¾ç¤º */
        }
        .pdf-btn {
            width: 100%; padding: 15px;
            background: #27ae60; /* ç»¿è‰²ä»£è¡¨å®Œæˆ/ä¸‹è½½ */
            color: white; border: none; border-radius: 8px;
            font-size: 18px; font-weight: bold;
            display: flex; justify-content: center; align-items: center;
        }
        .pdf-btn span { margin-right: 10px; font-size: 22px; }


        /* =========================================
           æ ¸å¿ƒï¼šå…¨å±ç›¸æœºæ¨¡æ€æ¡† (Camera Modal)
        ========================================= */
        #camera-modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; z-index: 9999;
            display: none; /* é»˜è®¤éšè— */
            flex-direction: column;
        }

        /* è§†é¢‘æµåŒºåŸŸ */
        .video-viewport {
            flex: 1;
            position: relative;
            overflow: hidden;
            display: flex; align-items: center; justify-content: center;
        }
        
        /* è§†é¢‘å…ƒç´ æœ¬èº« */
        #video-feed {
            /* ç¡®ä¿è§†é¢‘å æ»¡å±å¹•ï¼Œå¯èƒ½è¢«è£å‰ªï¼Œä½†æˆ‘ä»¬ä¼šä»ä¸­å¿ƒæŠ å›¾ */
            width: 100%; height: 100%; object-fit: cover;
        }

        /* --- å…³é”®ï¼šç»¿è‰²çš„å¼•å¯¼å¯¹å‡†æ¡† --- */
        .guide-overlay {
            position: absolute;
            /* å®½åº¦è®¾ä¸ºå±å¹•çš„ 85%ï¼Œé«˜åº¦æŒ‰æ¯”ä¾‹è‡ªåŠ¨è®¡ç®— */
            width: 85%;
            aspect-ratio: 1.58 / 1; /* CSSæ–°å±æ€§ï¼Œå¼ºåˆ¶å›ºå®šæ¯”ä¾‹ */
            border: 3px solid #00ff00; /* é²œè‰³çš„ç»¿æ¡† */
            border-radius: 8px;
            box-shadow: 0 0 0 100vmax rgba(0, 0, 0, 0.6); /* æ ¸å¿ƒï¼šå‹æš—æ¡†å¤–çš„åŒºåŸŸ */
            pointer-events: none; /* é˜²æ­¢é®æŒ¡ */
        }
        .guide-text {
            position: absolute; width: 100%; text-align: center;
            color: #00ff00; top: -40px; font-size: 16px; font-weight: bold;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.8);
        }

        /* åº•éƒ¨æ“ä½œæ  */
        .camera-controls {
            height: 130px; background: #000;
            display: flex; justify-content: space-around; align-items: center;
            padding-bottom: 30px;
        }
        .btn-close { color: #fff; background: none; border: none; font-size: 16px; padding: 20px;}
        /* å¿«é—¨æŒ‰é’® */
        .btn-shutter {
            width: 76px; height: 76px; background: #fff; border-radius: 50%;
            border: 4px solid rgba(255,255,255,0.3); transition: transform 0.1s;
        }
        .btn-shutter:active { transform: scale(0.9); background: #ddd; }
        .spacer { width: 60px; }
    </style>
</head>
<body>

    <h2>èº«ä»½è¯æ™ºèƒ½é‡‡é›†ç»ˆç«¯</h2>

    <div class="main-container">
        
        <div class="scan-card">
            <div class="card-header"><span>èº«ä»½è¯æ­£é¢ (äººåƒ)</span></div>
            <div class="img-display-area">
                <div class="placeholder" id="ph-front">
                    <span>ğŸ“·</span><p>å°šæœªæ‰«æ</p>
                </div>
                <img id="img-front" class="scanned-result">
            </div>
            <button class="start-btn" onclick="startScan('front')">å¯åŠ¨æ‰«æä»ª</button>
        </div>

        <div class="scan-card">
            <div class="card-header"><span>èº«ä»½è¯åé¢ (å›½å¾½)</span></div>
            <div class="img-display-area">
                <div class="placeholder" id="ph-back
